<!-- Client for settings up Sayonara -->
<!DOCTYPE html>
<html>

<head>
    <title>Sayonara Setup</title>

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>

    <!-- Angular Loading bar -->
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/angular-loading-bar/0.9.0/loading-bar.min.css' type='text/css' media='all' />
    <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/angular-loading-bar/0.9.0/loading-bar.min.js'></script>


    <!-- Angular Logic -->
    <script>
        (function() {
            var app = angular.module("sayonara", ['angular-loading-bar']);
            app.controller("setup", ["$scope", "$http", "$location", function($scope, $http, $location) {

                //Testing stuff
                $scope.default = 'New Sayonara App';

                $scope.pages = [];
                $scope.getPages = function() {

                    //send post request to api
                    $http({
                        method: 'GET',
                        url: 'api/pages/all'
                    }).then(function successCallback(response) {
                        // this callback will be called asynchronously
                        // when the response is available
                        $scope.pages = response.data;
                    }, function errorCallback(error) {
                        // called asynchronously if an error occurs
                        // or server returns response with an error status.
                        $scope.pages = response;
                    });
                };
                $scope.getPages();
            }]);
        })();
    </script>

    <!-- Styles -->
    <style>
        body {
            background-color: whitesmoke;
        }

        .center {
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        .noMargin {
            height: 10px;
        }

        .sayonaraImage {
            width: 80%;
            height: auto;
        }
    </style>
</head>

<body ng-app="sayonara">
    <div class="center" ng-controller="setup">

        <!-- Dynamic content -->
        <h1>{{default}}<h1>
        <h3>Go to <a href="/admin">/admin</a> for the admin panel</h3>

        <!-- pages -->
        <div ng-repeat="page in pages">
            <h3>Title: {{page.title}}</h3>
            <h3>Content:</h3>
            {{page.content}}
            <h3>Date:</h3>
            {{page.date}}
        </div>

        <h2>Raw Pages:</h2>
        {{pages}}
    </div>
</body>

</html>
